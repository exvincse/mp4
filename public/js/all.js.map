{"version":3,"sources":["all.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","measurementId","Vue","firebase","data","music","load","id","file","video","noclick","progress","start","mounted","this","getfile","methods","togglemusic","get","index","end","_this","some","item","num","fileUrl","indexOf","length","upload","_this2","$refs","files","undefined","size","alert","type","split","storage","ref","child","concat","name","put","uploadTask","on","snapshot","bytesTransferred","toFixed","total","totalBytes","getDownloadURL","then","downloadURL","updatefile","push","_this3","database","val","$nextTick","document","querySelector","volume","play"],"mappings":"cAAA,WACE,GAAMA,IADPC,OAAA,0CACCC,WAAMF,gCACJC,YAAQ,uCACRC,UAAU,gBACVC,cAAa,4BACbC,kBAAW,eACXC,MAAAA,4CACAC,cAAAA,eAEAC,UAAAA,cAAeP,GARM,GAAvBQ,MAUAC,GAAAA,OACAC,KAXA,WAYI,OADIC,MAAA,GAGJC,KAAO,GACLD,GAAAA,EACAC,QACAC,SACAC,SAJK,EAKLC,UACAC,MAAO,EACPC,MAAQ,EACNC,SADO,KAPJC,QAdX,WAWQC,KAAAC,WAkBJC,SAlBIC,YAkBCF,SAlBDG,EAAAC,GAoBNH,KAASX,MAAAa,EACPD,KAAAA,GADOE,EAELL,KAAKT,KAALC,QAEAc,IANGL,WAMH,GAAAM,GAAAP,IAJKA,MAAAL,MAAAa,KAAA,SAAAC,EAAAC,GAOL,OADG,IANED,EAAAE,QAMFC,QAAAL,EAAAhB,SAAAgB,EAAAd,GAAAiB,IAC2B,IAAzBf,EAAMa,QAAKI,QAAAL,EAAAhB,SAEZS,KAAAP,GAAA,EAAUiB,KAAVf,MAAAkB,OAAA,GACDb,KAAAT,MAAAS,KAAAL,MAAA,GAAAgB,QAKDX,KAAKP,GAAK,IARZO,KAAAT,MAAAS,KAAAL,MAAAK,KAAAP,GAAA,GAAAkB,QAWEX,KAAKP,IAAM,GAJXO,KAAAR,KAAKD,QAENuB,OAlBEb,WAeH,GAAAc,GAAAf,KAIEN,EAAKH,KAAQyB,MAAKrB,KAAMsB,MAAA,EACxB,QAAAC,KAAAxB,EAAA,OAAA,CACD,IAAAA,EAAAyB,KAAA,IAAA,IACD,MAMEC,OAAM,kBANR,CAEM,IAAA,QAAA1B,EAAA2B,KAAAC,MAAA,KAAA,GACN,MAQEF,OAAM,mBARA,CAWR,IAAIG,GAAUlC,SAASkC,UAAUC,KATjCxB,MAAIN,SAAA,CACF0B,IAAAA,GAAMG,EAANE,MAAM,OAAAC,OAANhC,EAAAiC,OAAAC,IAAAlC,EACAmC,GAAOC,GAAP,gBAAA,SAAAC,GACDhB,EAAAlB,SAAAC,OAAAiC,EAAAC,iBAAA,KAAAC,QAAA,GAWClB,EAAKlB,SAASqC,OAASH,EAASI,WAAa,KAASF,QAAQ,GAX/DlB,EAAAlB,SAAAA,SAAAkC,EAAAC,iBAAAD,EAAAI,WAAA,KAaE,aAXH,WACEf,EAAMW,SAAAP,IAANY,iBAAAC,KAAA,SAAAC,GACAvB,EAAOrB,MACRiB,QAAA2B,EAaKX,KAAMjC,EAAKiC,KAbhBN,KAAA3B,EAAA2B,KAAAC,MAAA,KAAA,MAEI1B,KAAAA,WACCiC,EAAAA,SAAaN,MAAQE,EAC3BI,EAAAA,SAAcK,MAAA,EACZnB,EAAKlB,SAASC,SAASiC,EACvBhB,EAAKlB,kBAKH0C,WA9CDtC,WA+CGU,SAAAA,WAAS2B,IAAAA,SADCE,KAAAxC,KAAAN,MAEViC,KAAAA,WAFU1B,QA9CbA,WA8CC,GAAAwC,GAAAzC,IAKMX,UAAMqD,WAAAlB,IAAA,SACP3B,GAAAA,QAAL,SAAAkC,GACA,GAAA,OAAAA,EAAKlC,MAAL,OAAA,CACA4C,GAAA9C,MAAKE,OAASA,OAAdkC,EAAAY,OAcFF,EAAKlD,MAAQkD,EAAK9C,MAAM,GAAGgB,QAbzB8B,EAAA7C,SAAK2C,EACNE,EAXDG,UAAA,WANFH,EAAAjD,KAAAqD,SAAAC,cAAA,WArCKL,EAAAjD,KAAAuD,OAAA,IAyDPR,EAzDO/C,KAAAwD,gBA6EV5D","file":"all.js","sourcesContent":["(function(){\r\n  const firebaseConfig = {\r\n    apiKey: \"AIzaSyCG97TbGDVQrMXrWAwX6BEomY0za-RwAHg\",\r\n    authDomain: \"testmp4-69da7.firebaseapp.com\",\r\n    databaseURL: \"https://testmp4-69da7.firebaseio.com\",\r\n    projectId: \"testmp4-69da7\",\r\n    storageBucket: \"testmp4-69da7.appspot.com\",\r\n    messagingSenderId: \"878000337213\",\r\n    appId: \"1:878000337213:web:f37eb95a024a7c79ae9554\",\r\n    measurementId: \"G-VEFZW9KSXQ\"\r\n  };\r\n  firebase.initializeApp(firebaseConfig);\r\n  new Vue({\r\n    el: '#app',\r\n    data() {\r\n      return {\r\n        music:'',\r\n        load:'',\r\n        id: 0,\r\n        file:{},\r\n        video:[],\r\n        noclick:false,\r\n        progress:{\r\n          start:0,\r\n          total:0,\r\n          progress:0,\r\n        },\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getfile();\r\n    },\r\n    methods: {\r\n      togglemusic(get,index){\r\n        this.music = get;\r\n        this.id = index;\r\n        this.load.load();\r\n      },\r\n      end(){\r\n        this.video.some((item,num) => {\r\n          if(item.fileUrl.indexOf(this.music) !== -1){\r\n            this.id = num;\r\n          }\r\n          return item.fileUrl.indexOf(this.music) !== -1;\r\n        });\r\n        if(this.id + 1 > this.video.length -1){\r\n          this.music = this.video[0].fileUrl;\r\n          this.id = 0;\r\n        }else{\r\n          this.music = this.video[this.id + 1].fileUrl;\r\n          this.id += 1;\r\n        }\r\n        this.load.load();\r\n      },\r\n      upload(){\r\n        let file = this.$refs.file.files[0];\r\n        if(file === undefined) return false;\r\n        if((file.size / 1000000) > 100) {\r\n          alert('請勿上傳超過100MB檔案');\r\n          return false;\r\n        };\r\n\r\n        if(file.type.split('/')[1] !== 'mp4') {\r\n          alert('請勿上傳不是mp4格式的檔案');\r\n          return false;\r\n        };\r\n        let storage = firebase.storage().ref();\r\n        this.noclick = true;\r\n        const uploadTask = storage.child(`mp4/${file.name}`).put(file);\r\n        uploadTask.on('state_changed', (snapshot) => {\r\n          this.progress.start = (snapshot.bytesTransferred / 1000000).toFixed(1);\r\n          this.progress.total = (snapshot.totalBytes / 1000000).toFixed(1);\r\n          this.progress.progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 200;\r\n        }, () => {\r\n        }, () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n            this.file = {\r\n              fileUrl: downloadURL,\r\n              name: file.name,\r\n              type: file.type.split('/')[1],\r\n            };\r\n          }).then(() => {\r\n            this.progress.start = 0;\r\n            this.progress.total = 0;\r\n            this.progress.progress = 0;\r\n            this.updatefile();\r\n          });\r\n        });\r\n      },\r\n      updatefile(){\r\n        firebase.database().ref('/file').push(this.file);\r\n        this.getfile();\r\n      },\r\n      getfile(){\r\n        var starCountRef = firebase.database().ref('/file');\r\n        starCountRef.on('value', (snapshot) => {\r\n          if (snapshot.val() === null) return false;\r\n          this.video = Object.values(snapshot.val());\r\n          this.music = this.video[0].fileUrl;\r\n          this.noclick = false;\r\n          this.$nextTick(()=>{\r\n            this.load = document.querySelector('.video1');\r\n            this.load.volume = 0.25;\r\n            this.load.play();\r\n          })\r\n        });\r\n      }\r\n    },\r\n  })\r\n})(Vue)"]}