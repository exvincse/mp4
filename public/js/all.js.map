{"version":3,"sources":["all.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","el","Vue","data","music","load","id","file","video","loop","noclick","progress","start","total","mounted","getfile","methods","get","index","togglemusic","this","end","_this","some","item","num","fileUrl","indexOf","length","upload","_this2","$refs","files","undefined","size","alert","type","split","storage","ref","uploadTask","child","concat","name","put","on","snapshot","bytesTransferred","toFixed","totalBytes","getDownloadURL","then","downloadURL","updatefile","database","push","_this3","val","Object","values","document","querySelector","volume","play"],"mappings":"cACA,WAAC,GAAAA,IACCC,OAAMD,0CACJC,WAAQ,gCACRC,YAAY,uCACZC,UAAW,gBACXC,cAAW,4BACXC,kBAAe,eACfC,MAAAA,4CACAC,cAAO,eAPcC,UAAvBC,cAAAT,GAUAQ,GAAAA,MACAE,GAAIC,OACFD,KAFM,WAGNE,OACEC,MAAO,GACLA,KAAK,GACLC,GAAI,EACJC,QACAC,SACAC,MAAK,EACLC,SAAK,EACLC,UACAC,MAAQ,EACNC,MAAK,EACLC,SAFO,KAMZC,QAlBK,WAmBNA,KAlBMC,WAoBLC,SACDA,YArBM,SAqBGC,EAAAC,GACPC,KAAAA,MADOF,EAELG,KAAKhB,GAALc,EACAE,KAAKd,KAAKY,QAEXG,IA1BG,WAqBG,GAAAC,GAAAF,IAMPC,IANOD,KAAAX,KAAA,OAMF,CAAAW,MAAAZ,MAAAe,KAAA,SAAAC,EAAAC,GAGD,OAAyC,IAAtCD,EAAKE,QAAQC,QAAQL,EAAKlB,SAF5BkB,EAAKb,GAARgB,IAEE,IAAGD,EAAKE,QAAQC,QAAQL,EAAKlB,SAU/BgB,KAAAd,GAAA,EAAAc,KAAAZ,MAAAoB,OAAA,GAGER,KAAKhB,MAAQgB,KAAKZ,MAAM,GAAGkB,QAD7BN,KAAGd,GAAA,IAEDc,KAAKd,MAALc,KAAAZ,MAAAY,KAAAd,GAAA,GAAAoB,QAFFN,KAGKd,IAAA,GAGJc,KACDf,KAAAA,QAGFwB,OApDI,WAoDI,GAAAC,GAAAV,KAFNb,EAAUF,KAAV0B,MAAAxB,KAAAyB,MAAA,EA7BK,QAAAC,KAAA1B,EAAA,OAAA,CA+BPsB,IA/BOtB,EAAA2B,KAAA,IA+BC,IAKJ,MALIC,OAAA,kBAKG,CAGT,IAA+B,QAA5B5B,EAAK6B,KAAKC,MAAM,KAAK,GAJtBF,MADFA,OAAQ,mBACA,CAEP,IAAAG,GAAAvC,SAAAuC,UAAAC,KAODnB,MAAKV,SAAU,CAPd,IAAA8B,GAAAF,EAAAG,MAAA,OAAAC,OAAAnC,EAAAoC,OAAAC,IAAArC,EASDiC,GAAWK,GAAG,gBAAiB,SAACC,GAPhChB,EAAGvB,SAAU8B,OAAWS,EAAOC,iBAAO,KAAAC,QAAA,GACpCb,EAAKxB,SAACE,OAANiC,EAAAG,WAAA,KAAAD,QAAA,GACAlB,EAAAnB,SAAAA,SAAAmC,EAAAC,iBAAAD,EAAAG,WAAA,KACD,aASE,WATFT,EAAAM,SAAAP,IAAAW,iBAAAC,KAAA,SAAAC,GACGd,EAAAA,MACC5B,QAAU0C,EACTZ,KAAAA,EAAaF,KACnBE,KAAWK,EAAGT,KAAAC,MAAA,KAAiB,MAE7Bc,KAAKxC,WACLmB,EAAKnB,SAASA,MAAd,EACCmB,EAAAnB,SAJHE,MAKG,EACD2B,EAAAA,SAAWM,SAAaI,EACtBpB,EAAAuB,kBAAYA,WA1Ed,WA+ECtD,SANDuD,WAMQf,IAAM,SAAAgB,KAAAnC,KAAAb,MACZa,KAAAL,WAEAA,QAlFF,WAkFE,GAAAyC,GAAApC,IAUerB,UAASuD,WAAWf,IAAI,SATlCc,GAAAA,QAAL,SAAAP,GACD,GAXD,OAAAA,EAAAW,MAAA,OAAA,CANFD,GAAAhD,MAAAkD,OAAAC,OAAAb,EAAAW,OA9CKD,EAAApD,MAAAoD,EAAAhD,MAAA,GAAAkB,QAkEP2B,EAAAA,SAlEO,EAmELtD,EAAAA,UAAA,WACAyD,EAAKzC,KAAL6C,SAAAC,cAAA,WApEKL,EAAAnD,KAAAyD,OAAA,IAsEP/C,EAtEOV,KAAA0D,gBA0EH7D","file":"all.js","sourcesContent":["\r\n(function(){\r\n  const firebaseConfig = {\r\n    apiKey: \"AIzaSyCG97TbGDVQrMXrWAwX6BEomY0za-RwAHg\",\r\n    authDomain: \"testmp4-69da7.firebaseapp.com\",\r\n    databaseURL: \"https://testmp4-69da7.firebaseio.com\",\r\n    projectId: \"testmp4-69da7\",\r\n    storageBucket: \"testmp4-69da7.appspot.com\",\r\n    messagingSenderId: \"878000337213\",\r\n    appId: \"1:878000337213:web:f37eb95a024a7c79ae9554\",\r\n    measurementId: \"G-VEFZW9KSXQ\"\r\n  };\r\n  firebase.initializeApp(firebaseConfig);\r\n  new Vue({\r\n    el: '#app',\r\n    data() {\r\n      return {\r\n        music:'',\r\n        load:'',\r\n        id: 0,\r\n        file:{},\r\n        video:[],\r\n        loop:false,\r\n        noclick:false,\r\n        progress:{\r\n          start:0,\r\n          total:0,\r\n          progress:0,\r\n        },\r\n      }\r\n    },\r\n    mounted() {\r\n      this.getfile();\r\n    },\r\n    methods: {\r\n      togglemusic(get,index){\r\n        this.music = get;\r\n        this.id = index;\r\n        this.load.load();\r\n      },\r\n      end(){\r\n        if(this.loop) return false;\r\n        this.video.some((item,num) => {\r\n          if(item.fileUrl.indexOf(this.music) !== -1){\r\n            this.id = num;\r\n          }\r\n          return item.fileUrl.indexOf(this.music) !== -1;\r\n        });\r\n\r\n        // if(this.loop){\r\n        //   this.load.loop = true;\r\n        //   this.load.load();\r\n        //   return;\r\n        // }\r\n\r\n        if(this.id + 1 > this.video.length -1){\r\n          this.music = this.video[0].fileUrl;\r\n          this.id = 0;\r\n        }else{\r\n          this.music = this.video[this.id + 1].fileUrl;\r\n          this.id += 1;\r\n        }\r\n        // this.load.loop = false;\r\n        this.load.load();\r\n      },\r\n      upload(){\r\n        let file = this.$refs.file.files[0];\r\n        if(file === undefined) return false;\r\n        if((file.size / 1000000) > 100) {\r\n          alert('請勿上傳超過100MB檔案');\r\n          return false;\r\n        };\r\n\r\n        if(file.type.split('/')[1] !== 'mp4') {\r\n          alert('請勿上傳不是mp4格式的檔案');\r\n          return false;\r\n        };\r\n        let storage = firebase.storage().ref();\r\n        this.noclick = true;\r\n        const uploadTask = storage.child(`mp4/${file.name}`).put(file);\r\n        uploadTask.on('state_changed', (snapshot) => {\r\n          this.progress.start = (snapshot.bytesTransferred / 1000000).toFixed(1);\r\n          this.progress.total = (snapshot.totalBytes / 1000000).toFixed(1);\r\n          this.progress.progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 200;\r\n        }, () => {\r\n        }, () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {\r\n            this.file = {\r\n              fileUrl: downloadURL,\r\n              name: file.name,\r\n              type: file.type.split('/')[1],\r\n            };\r\n          }).then(() => {\r\n            this.progress.start = 0;\r\n            this.progress.total = 0;\r\n            this.progress.progress = 0;\r\n            this.updatefile();\r\n          });\r\n        });\r\n      },\r\n      updatefile(){\r\n        firebase.database().ref('/file').push(this.file);\r\n        this.getfile();\r\n      },\r\n      getfile(){\r\n        var starCountRef = firebase.database().ref('/file');\r\n        starCountRef.on('value', (snapshot) => {\r\n          if (snapshot.val() === null) return false;\r\n          this.video = Object.values(snapshot.val());\r\n          this.music = this.video[0].fileUrl;\r\n          this.noclick = false;\r\n          this.$nextTick(()=>{\r\n            this.load = document.querySelector('.video1');\r\n            this.load.volume = 0.25;\r\n            this.load.play();\r\n          })\r\n        });\r\n      }\r\n    },\r\n  })\r\n})(Vue);\r\n"]}