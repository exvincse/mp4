"use strict";!function(){var e={apiKey:"AIzaSyCG97TbGDVQrMXrWAwX6BEomY0za-RwAHg",authDomain:"testmp4-69da7.firebaseapp.com",databaseURL:"https://testmp4-69da7.firebaseio.com",projectId:"testmp4-69da7",storageBucket:"testmp4-69da7.appspot.com",messagingSenderId:"878000337213",appId:"1:878000337213:web:f37eb95a024a7c79ae9554",measurementId:"G-VEFZW9KSXQ"};firebase.initializeApp(e),new Vue({el:"#app",data:function(){return{music:"",load:"",id:0,file:{},video:[],loop:!1,noclick:!1,progress:{start:0,total:0,progress:0}}},mounted:function(){this.getfile()},methods:{togglemusic:function(e,t){this.music=e,this.id=t,this.load.load()},end:function(){var e=this;if(this.loop)return!1;this.video.some(function(t,i){return-1!==t.fileUrl.indexOf(e.music)&&(e.id=i),-1!==t.fileUrl.indexOf(e.music)}),this.id+1>this.video.length-1?(this.music=this.video[0].fileUrl,this.id=0):(this.music=this.video[this.id+1].fileUrl,this.id+=1),this.load.load()},upload:function(){var e=this,t=this.$refs.file.files[0];if(void 0===t)return!1;if(t.size/1e6>100)return alert("請勿上傳超過100MB檔案"),!1;if("mp4"!==t.type.split("/")[1])return alert("請勿上傳不是mp4格式的檔案"),!1;var i=firebase.storage().ref();this.noclick=!0;var s=i.child("mp4/".concat(t.name)).put(t);s.on("state_changed",function(t){e.progress.start=(t.bytesTransferred/1e6).toFixed(1),e.progress.total=(t.totalBytes/1e6).toFixed(1),e.progress.progress=t.bytesTransferred/t.totalBytes*200},function(){},function(){s.snapshot.ref.getDownloadURL().then(function(i){e.file={fileUrl:i,name:t.name,type:t.type.split("/")[1]}}).then(function(){e.progress.start=0,e.progress.total=0,e.progress.progress=0,e.updatefile()})})},updatefile:function(){firebase.database().ref("/file").push(this.file),this.getfile()},getfile:function(){var e=this;firebase.database().ref("/file").on("value",function(t){if(null===t.val())return!1;e.video=Object.values(t.val()),e.music=e.video[0].fileUrl,e.noclick=!1,e.$nextTick(function(){e.load=document.querySelector(".video1"),e.load.volume=.25})})}}})}(Vue);
//# sourceMappingURL=all.js.map
